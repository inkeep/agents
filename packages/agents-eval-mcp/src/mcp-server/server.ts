/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { McpServer } from '@modelcontextprotocol/sdk/server/mcp.js';
import { InkeepAgentsCore } from '../core.js';
import { SDKOptions } from '../lib/config.js';
import type { ConsoleLogger } from './console-logger.js';
import { createRegisterPrompt } from './prompts.js';
import { createRegisterResource, createRegisterResourceTemplate } from './resources.js';
import { MCPScope } from './scopes.js';
import { createRegisterTool } from './tools.js';
import { tool$evaluationsAddEvaluatorToSuiteConfig } from './tools/evaluationsAddEvaluatorToSuiteConfig.js';
import { tool$evaluationsCreateDataset } from './tools/evaluationsCreateDataset.js';
import { tool$evaluationsCreateDatasetItem } from './tools/evaluationsCreateDatasetItem.js';
import { tool$evaluationsCreateDatasetItemsBulk } from './tools/evaluationsCreateDatasetItemsBulk.js';
import { tool$evaluationsCreateDatasetRunConfig } from './tools/evaluationsCreateDatasetRunConfig.js';
import { tool$evaluationsCreateEvaluationJobConfig } from './tools/evaluationsCreateEvaluationJobConfig.js';
import { tool$evaluationsCreateEvaluationResult } from './tools/evaluationsCreateEvaluationResult.js';
import { tool$evaluationsCreateEvaluationRunConfig } from './tools/evaluationsCreateEvaluationRunConfig.js';
import { tool$evaluationsCreateEvaluationSuiteConfig } from './tools/evaluationsCreateEvaluationSuiteConfig.js';
import { tool$evaluationsCreateEvaluator } from './tools/evaluationsCreateEvaluator.js';
import { tool$evaluationsDeleteDataset } from './tools/evaluationsDeleteDataset.js';
import { tool$evaluationsDeleteDatasetItem } from './tools/evaluationsDeleteDatasetItem.js';
import { tool$evaluationsDeleteDatasetRunConfig } from './tools/evaluationsDeleteDatasetRunConfig.js';
import { tool$evaluationsDeleteEvaluationJobConfig } from './tools/evaluationsDeleteEvaluationJobConfig.js';
import { tool$evaluationsDeleteEvaluationResult } from './tools/evaluationsDeleteEvaluationResult.js';
import { tool$evaluationsDeleteEvaluationRunConfig } from './tools/evaluationsDeleteEvaluationRunConfig.js';
import { tool$evaluationsDeleteEvaluationSuiteConfig } from './tools/evaluationsDeleteEvaluationSuiteConfig.js';
import { tool$evaluationsDeleteEvaluator } from './tools/evaluationsDeleteEvaluator.js';
import { tool$evaluationsGetDataset } from './tools/evaluationsGetDataset.js';
import { tool$evaluationsGetDatasetItem } from './tools/evaluationsGetDatasetItem.js';
import { tool$evaluationsGetDatasetRun } from './tools/evaluationsGetDatasetRun.js';
import { tool$evaluationsGetDatasetRunConfig } from './tools/evaluationsGetDatasetRunConfig.js';
import { tool$evaluationsGetEvaluationJobConfig } from './tools/evaluationsGetEvaluationJobConfig.js';
import { tool$evaluationsGetEvaluationJobConfigResults } from './tools/evaluationsGetEvaluationJobConfigResults.js';
import { tool$evaluationsGetEvaluationResult } from './tools/evaluationsGetEvaluationResult.js';
import { tool$evaluationsGetEvaluationRunConfig } from './tools/evaluationsGetEvaluationRunConfig.js';
import { tool$evaluationsGetEvaluationRunConfigResults } from './tools/evaluationsGetEvaluationRunConfigResults.js';
import { tool$evaluationsGetEvaluationSuiteConfig } from './tools/evaluationsGetEvaluationSuiteConfig.js';
import { tool$evaluationsGetEvaluator } from './tools/evaluationsGetEvaluator.js';
import { tool$evaluationsListDatasetItems } from './tools/evaluationsListDatasetItems.js';
import { tool$evaluationsListDatasetRunConfigs } from './tools/evaluationsListDatasetRunConfigs.js';
import { tool$evaluationsListDatasetRuns } from './tools/evaluationsListDatasetRuns.js';
import { tool$evaluationsListDatasets } from './tools/evaluationsListDatasets.js';
import { tool$evaluationsListEvaluationJobConfigs } from './tools/evaluationsListEvaluationJobConfigs.js';
import { tool$evaluationsListEvaluationRunConfigs } from './tools/evaluationsListEvaluationRunConfigs.js';
import { tool$evaluationsListEvaluationSuiteConfigEvaluators } from './tools/evaluationsListEvaluationSuiteConfigEvaluators.js';
import { tool$evaluationsListEvaluationSuiteConfigs } from './tools/evaluationsListEvaluationSuiteConfigs.js';
import { tool$evaluationsListEvaluators } from './tools/evaluationsListEvaluators.js';
import { tool$evaluationsRemoveEvaluatorFromSuiteConfig } from './tools/evaluationsRemoveEvaluatorFromSuiteConfig.js';
import { tool$evaluationsUpdateDataset } from './tools/evaluationsUpdateDataset.js';
import { tool$evaluationsUpdateDatasetItem } from './tools/evaluationsUpdateDatasetItem.js';
import { tool$evaluationsUpdateDatasetRunConfig } from './tools/evaluationsUpdateDatasetRunConfig.js';
import { tool$evaluationsUpdateEvaluationJobConfig } from './tools/evaluationsUpdateEvaluationJobConfig.js';
import { tool$evaluationsUpdateEvaluationResult } from './tools/evaluationsUpdateEvaluationResult.js';
import { tool$evaluationsUpdateEvaluationRunConfig } from './tools/evaluationsUpdateEvaluationRunConfig.js';
import { tool$evaluationsUpdateEvaluationSuiteConfig } from './tools/evaluationsUpdateEvaluationSuiteConfig.js';
import { tool$evaluationsUpdateEvaluator } from './tools/evaluationsUpdateEvaluator.js';
import { tool$healthGetHealth } from './tools/healthGetHealth.js';

export function createMCPServer(deps: {
  logger: ConsoleLogger;
  allowedTools?: string[] | undefined;
  scopes?: MCPScope[] | undefined;
  getSDK?: () => InkeepAgentsCore;
  serverURL?: string | undefined;
  serverIdx?: SDKOptions['serverIdx'] | undefined;
}) {
  const server = new McpServer({
    name: 'InkeepAgents',
    version: '0.0.18',
  });

  const getClient =
    deps.getSDK ||
    (() =>
      new InkeepAgentsCore({
        serverURL: deps.serverURL,
        serverIdx: deps.serverIdx,
        debugLogger:
          deps.logger.level === 'debug'
            ? {
                log: (...args) => console.log(...args),
                group: (...args) => console.group(...args),
                groupEnd: (...args) => console.groupEnd(...args),
              }
            : undefined,
      }));

  const scopes = new Set(deps.scopes);

  const allowedTools = deps.allowedTools && new Set(deps.allowedTools);
  const tool = createRegisterTool(deps.logger, server, getClient, scopes, allowedTools);
  const resource = createRegisterResource(deps.logger, server, getClient, scopes);
  const resourceTemplate = createRegisterResourceTemplate(deps.logger, server, getClient, scopes);
  const prompt = createRegisterPrompt(deps.logger, server, getClient, scopes);
  const register = { tool, resource, resourceTemplate, prompt };
  void register; // suppress unused warnings

  tool(tool$healthGetHealth);
  tool(tool$evaluationsListDatasets);
  tool(tool$evaluationsCreateDataset);
  tool(tool$evaluationsGetDataset);
  tool(tool$evaluationsUpdateDataset);
  tool(tool$evaluationsDeleteDataset);
  tool(tool$evaluationsListDatasetItems);
  tool(tool$evaluationsCreateDatasetItem);
  tool(tool$evaluationsGetDatasetItem);
  tool(tool$evaluationsUpdateDatasetItem);
  tool(tool$evaluationsDeleteDatasetItem);
  tool(tool$evaluationsCreateDatasetItemsBulk);
  tool(tool$evaluationsListEvaluators);
  tool(tool$evaluationsCreateEvaluator);
  tool(tool$evaluationsGetEvaluator);
  tool(tool$evaluationsUpdateEvaluator);
  tool(tool$evaluationsDeleteEvaluator);
  tool(tool$evaluationsListEvaluationSuiteConfigs);
  tool(tool$evaluationsCreateEvaluationSuiteConfig);
  tool(tool$evaluationsGetEvaluationSuiteConfig);
  tool(tool$evaluationsUpdateEvaluationSuiteConfig);
  tool(tool$evaluationsDeleteEvaluationSuiteConfig);
  tool(tool$evaluationsListEvaluationSuiteConfigEvaluators);
  tool(tool$evaluationsAddEvaluatorToSuiteConfig);
  tool(tool$evaluationsRemoveEvaluatorFromSuiteConfig);
  tool(tool$evaluationsListEvaluationJobConfigs);
  tool(tool$evaluationsCreateEvaluationJobConfig);
  tool(tool$evaluationsGetEvaluationJobConfig);
  tool(tool$evaluationsUpdateEvaluationJobConfig);
  tool(tool$evaluationsDeleteEvaluationJobConfig);
  tool(tool$evaluationsGetEvaluationJobConfigResults);
  tool(tool$evaluationsGetEvaluationRunConfigResults);
  tool(tool$evaluationsGetEvaluationResult);
  tool(tool$evaluationsUpdateEvaluationResult);
  tool(tool$evaluationsDeleteEvaluationResult);
  tool(tool$evaluationsCreateEvaluationResult);
  tool(tool$evaluationsListDatasetRunConfigs);
  tool(tool$evaluationsGetDatasetRunConfig);
  tool(tool$evaluationsUpdateDatasetRunConfig);
  tool(tool$evaluationsDeleteDatasetRunConfig);
  tool(tool$evaluationsCreateDatasetRunConfig);
  tool(tool$evaluationsListDatasetRuns);
  tool(tool$evaluationsGetDatasetRun);
  tool(tool$evaluationsListEvaluationRunConfigs);
  tool(tool$evaluationsCreateEvaluationRunConfig);
  tool(tool$evaluationsGetEvaluationRunConfig);
  tool(tool$evaluationsUpdateEvaluationRunConfig);
  tool(tool$evaluationsDeleteEvaluationRunConfig);

  return server;
}
