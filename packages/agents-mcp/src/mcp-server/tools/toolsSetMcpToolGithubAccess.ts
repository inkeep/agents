/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 * @generated-id: 1ec6454bec68
 */

import { toolsSetMcpToolGithubAccess } from "../../funcs/toolsSetMcpToolGithubAccess.js";
import { SetMcpToolGithubAccessRequest$zodSchema } from "../../models/setmcptoolgithubaccessop.js";
import { formatResult, ToolDefinition } from "../tools.js";

const args = {
  request: SetMcpToolGithubAccessRequest$zodSchema,
};

export const tool$toolsSetMcpToolGithubAccess: ToolDefinition<typeof args> = {
  name: "tools-set-mcp-tool-github-access",
  description: `Set MCP tool GitHub repository access

Configures which GitHub repositories an MCP tool can access. When mode is "all", the tool has access to all repositories the project can access. When mode is "selected", the tool is scoped to specific repositories (repositoryIds required). This replaces any existing access configuration. This endpoint only works for GitHub workapp MCP tools (isWorkApp=true and URL contains /github).`,
  annotations: {
    "title": "",
    "destructiveHint": false,
    "idempotentHint": false,
    "openWorldHint": false,
    "readOnlyHint": false,
  },
  args,
  tool: async (client, args, ctx) => {
    const [result, apiCall] = await toolsSetMcpToolGithubAccess(
      client,
      args.request,
      { fetchOptions: { signal: ctx.signal } },
    ).$inspect();

    if (!result.ok) {
      return {
        content: [{ type: "text", text: result.error.message }],
        isError: true,
      };
    }

    const value = result.value;

    return formatResult(value, apiCall);
  },
};
