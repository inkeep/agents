/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 * @generated-id: 82100af6b539
 */

import { gitHubDisconnectGithubInstallation } from "../../funcs/gitHubDisconnectGithubInstallation.js";
import { DisconnectGithubInstallationRequest$zodSchema } from "../../models/disconnectgithubinstallationop.js";
import { formatResult, ToolDefinition } from "../tools.js";

const args = {
  request: DisconnectGithubInstallationRequest$zodSchema,
};

export const tool$gitHubDisconnectGithubInstallation: ToolDefinition<
  typeof args
> = {
  name: "git-hub-disconnect-github-installation",
  description: `Disconnect a GitHub App installation

Disconnects a GitHub App installation from the tenant. This soft deletes the installation (sets status to "disconnected") and removes all project repository access entries. The installation record is preserved for audit purposes. Note: This does NOT uninstall the GitHub App from GitHub - the user can do that separately from GitHub settings.`,
  annotations: {
    "title": "",
    "destructiveHint": false,
    "idempotentHint": false,
    "openWorldHint": false,
    "readOnlyHint": false,
  },
  args,
  tool: async (client, args, ctx) => {
    const [result, apiCall] = await gitHubDisconnectGithubInstallation(
      client,
      args.request,
      { fetchOptions: { signal: ctx.signal } },
    ).$inspect();

    if (!result.ok) {
      return {
        content: [{ type: "text", text: result.error.message }],
        isError: true,
      };
    }

    const value = result.value;

    return formatResult(value, apiCall);
  },
};
