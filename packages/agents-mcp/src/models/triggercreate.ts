/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 * @generated-id: ac800633b192
 */

import * as z from "zod";
import { ClosedEnum } from "../types/enums.js";
import { ComponentJoin, ComponentJoin$zodSchema } from "./componentjoin.js";
import {
  SignatureSource,
  SignatureSource$zodSchema,
} from "./signaturesource.js";
import {
  SignatureValidationOptions,
  SignatureValidationOptions$zodSchema,
} from "./signaturevalidationoptions.js";
import {
  SignedComponent,
  SignedComponent$zodSchema,
} from "./signedcomponent.js";
import {
  TriggerAuthenticationInput,
  TriggerAuthenticationInput$zodSchema,
} from "./triggerauthenticationinput.js";
import {
  TriggerOutputTransform,
  TriggerOutputTransform$zodSchema,
} from "./triggeroutputtransform.js";

/**
 * HMAC algorithm to use for signature verification
 */
export const TriggerCreateAlgorithm = {
  Sha256: "sha256",
  Sha512: "sha512",
  Sha384: "sha384",
  Sha1: "sha1",
  Md5: "md5",
} as const;
/**
 * HMAC algorithm to use for signature verification
 */
export type TriggerCreateAlgorithm = ClosedEnum<typeof TriggerCreateAlgorithm>;

export const TriggerCreateAlgorithm$zodSchema = z.enum([
  "sha256",
  "sha512",
  "sha384",
  "sha1",
  "md5",
]).describe("HMAC algorithm to use for signature verification");

/**
 * Encoding format of the signature (hex or base64)
 */
export const TriggerCreateEncoding = {
  Hex: "hex",
  Base64: "base64",
} as const;
/**
 * Encoding format of the signature (hex or base64)
 */
export type TriggerCreateEncoding = ClosedEnum<typeof TriggerCreateEncoding>;

export const TriggerCreateEncoding$zodSchema = z.enum([
  "hex",
  "base64",
]).describe("Encoding format of the signature (hex or base64)");

/**
 * Configuration for webhook signature verification
 */
export type TriggerCreateSignatureVerification = {
  algorithm: TriggerCreateAlgorithm;
  encoding: TriggerCreateEncoding;
  signature: SignatureSource;
  signedComponents: Array<SignedComponent>;
  componentJoin: ComponentJoin;
  validation?: SignatureValidationOptions | undefined;
};

export const TriggerCreateSignatureVerification$zodSchema: z.ZodType<
  TriggerCreateSignatureVerification
> = z.object({
  algorithm: TriggerCreateAlgorithm$zodSchema,
  componentJoin: ComponentJoin$zodSchema,
  encoding: TriggerCreateEncoding$zodSchema,
  signature: SignatureSource$zodSchema,
  signedComponents: z.array(SignedComponent$zodSchema),
  validation: SignatureValidationOptions$zodSchema.optional(),
}).describe("Configuration for webhook signature verification");

export type TriggerCreate = {
  id?: string | undefined;
  name: string;
  description?: string | null | undefined;
  enabled?: boolean | undefined;
  inputSchema?: { [k: string]: any | null } | null | undefined;
  outputTransform?: TriggerOutputTransform | null | undefined;
  messageTemplate?: string | null | undefined;
  authentication?: TriggerAuthenticationInput | null | undefined;
  signingSecretCredentialReferenceId?: string | null | undefined;
  signatureVerification?: TriggerCreateSignatureVerification | null | undefined;
  createdAt?: string | undefined;
  updatedAt?: string | undefined;
};

export const TriggerCreate$zodSchema: z.ZodType<TriggerCreate> = z.object({
  authentication: TriggerAuthenticationInput$zodSchema.nullable().optional(),
  createdAt: z.string().optional(),
  description: z.string().nullable().optional(),
  enabled: z.boolean().default(true),
  id: z.string().optional(),
  inputSchema: z.record(z.string(), z.any().nullable()).nullable().optional(),
  messageTemplate: z.string().nullable().optional(),
  name: z.string(),
  outputTransform: TriggerOutputTransform$zodSchema.nullable().optional(),
  signatureVerification: z.lazy(() =>
    TriggerCreateSignatureVerification$zodSchema
  ).nullable().optional(),
  signingSecretCredentialReferenceId: z.string().nullable().optional(),
  updatedAt: z.string().optional(),
});
