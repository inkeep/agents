---
title: Build Custom MCP Servers
sidebarTitle: Custom
description: Build your own custom MCP servers
icon: "brand/Inkeep"
---

## When to Build Custom MCP Servers

Build custom MCP servers when:
- Native servers don't exist for your specific APIs
- You need custom business logic beyond what existing servers provide
- You have proprietary systems that require custom integration

If pre-built servers meet your needs, consider [Native MCP servers](/tutorials/mcp-servers/native-mcp-servers) or [Composio's platform](/tutorials/mcp-servers/composio-mcp-servers) instead.

## Getting Started

The Quick Start workspace includes a Next.js app in the `apps/mcp/app/` directory that you can use to expose your MCP servers.
Each MCP server you create will be exposed on a separate route on this app. 

#### Creating from a template

You can add a custom MCP server template from our [template library](https://github.com/inkeep/agents/tree/main/agents-cookbook/template-mcps) for common use cases using the [CLI](/typescript-sdk/cli-reference#inkeep-add).
```bash
inkeep add --mcp [server-name]
```

This will automatically add a custom MCP server template to your Quick Start workspace. After customizing and deploying it, you can register it with your agents.

#### Using Vercel's Template

If you want to create a custom MCP server, you can use Vercel's [Next.js MCP template](https://vercel.com/templates/next.js/model-context-protocol-mcp-with-next-js) as a starting point.

<Steps>
<Step>
Create a new directory in your project's `apps/mcp/app/` directory with your desired server name (e.g. `apps/mcp/app/my-email-mcp/mcp`).
```bash
mkdir -p apps/mcp/app/[server-name]/mcp
```
</Step>
<Step>
Copy the template route.ts file from the [Vercel MCP template](https://github.com/vercel-labs/mcp-for-next.js/blob/main/app/mcp/route.ts) into `apps/mcp/app/[server-name]/mcp/route.ts`.
</Step>
<Step>
Modify the template route.ts file with your desired tools and resources.
</Step>
<Step>
Set the `basePath` of the `createMcpHandler` to `/[server-name]`.
</Step>
</Steps>  

#### Running locally

```bash
pnpm dev
```

This will start the server on port 3006.

#### Deploying to Vercel

Follow the instructions in [Deploy to Vercel](/self-hosting/vercel#step-9-create-a-vercel-project-for-your-mcp-server-optional).
If you have already deployed to Vercel, you can simply update the deployment by pushing to the same repository.

<Note>
Enable Fluid compute and set `maxDuration` to 800 in `apps/mcp/app/[server-name]/[transport]/route.ts` if you're on a Pro or Enterprise plan and have long-running operations.
</Note>
