---
title: CLI Reference
description: Complete reference for the Inkeep CLI commands
icon: "LuTerminal"
---

## Overview

The Inkeep CLI is the primary tool for interacting with the Inkeep Agent Framework. It allows you to push agent configurations and interact with your multi-agent system.

## Installation

```bash
npm install -g @inkeep/agents-cli
```

## Global Options

All commands support the following global options:

- `--version` - Display CLI version
- `--help` - Display help for a command

## Commands

### `inkeep init`

Initialize a new Inkeep configuration file in your project.

```bash
inkeep init [path]
```

**Options:**

- `--no-interactive` - Skip interactive path selection

**Example:**

```bash
# Interactive initialization
inkeep init

# Initialize in specific directory
inkeep init ./my-project

# Non-interactive mode
inkeep init --no-interactive
```

### `inkeep push`

**Primary use case:** Push a project containing agent configurations to your server. This command deploys your entire multi-agent project, including all graphs, agents, and tools.

```bash
inkeep push
```

**Options:**

- `--project <project-path>` - Specify project directory by path or ID (defaults to current directory or searches for `inkeep.config.ts`)
- `--env <environment>` - Load environment-specific credentials from `environments/<environment>.env.ts`
- `--agents-manage-api-url <url>` - Override the management API URL from config
- `--json` - Generate project data as JSON file instead of pushing to server

**Examples:**

```bash
# Push project from current directory
inkeep push

# Push specific project directory
inkeep push --project ./my-project

# Push with development environment credentials
inkeep push --env development

# Generate project JSON without pushing
inkeep push --json

# Override API URL
inkeep push --agents-manage-api-url https://api.example.com
```

**Environment Credentials:**

The `--env` flag loads environment-specific credentials when pushing your project. This will look for files like `environments/development.env.ts` or `environments/production.env.ts` in your project directory and load the credential configurations defined there.

**Example environment file:**

```typescript
// environments/development.env.ts
import { CredentialStoreType } from "@inkeep/agents-core";
import { registerEnvironmentSettings } from "@inkeep/agents-sdk";

export const development = registerEnvironmentSettings({
  credentials: {
    "api-key-dev": {
      id: "api-key-dev",
      type: CredentialStoreType.memory,
      credentialStoreId: "memory-default",
      retrievalParams: {
        key: "API_KEY_DEV",
      },
    },
  },
});
```

#### Project Validation

When pushing an agent graph, the CLI will automatically validate that the target project exists in your local database. This prevents accidentally pushing graphs to non-existent projects.

**Behavior:**

1. The CLI checks if the project specified in your `inkeep.config.ts` exists
2. If the project doesn't exist, you'll be prompted to create it interactively
3. You can provide a project name and optional description
4. Once created, the push operation continues automatically

**Example:**

```bash
$ inkeep push my-graph.ts

✓ Configuration loaded
✓ Validating project...
⚠ Project "my-project-id" does not exist
? Project "my-project-id" does not exist. Would you like to create it? Yes
? Enter a name for the project: My Project
? Enter a description for the project (optional): A demo project
✓ Project "My Project" created successfully
✓ Graph "my-graph" pushed successfully
```

The CLI will:

1. Parse and validate your TypeScript file
2. Extract agent definitions and relationships
3. Deploy the configuration to your server
4. Make the agents available for interaction

### `inkeep pull`

Pull project configuration from the server and update all TypeScript files in your local project using LLM generation.

```bash
inkeep pull
```

**Options:**

- `--project <project-path>` - Specify project directory by path or ID (defaults to current directory or searches for `inkeep.config.ts`)
- `--agents-manage-api-url <url>` - Override the management API URL from config
- `--env <environment>` - Override tenant ID when using custom API URL
- `--json` - Save project data as JSON file instead of updating TypeScript files

**How it Works:**

The pull command discovers and updates all TypeScript files in your project based on the latest configuration from the server:

1. **File Discovery**: Recursively finds all `.ts` files in your project (excluding `environments/` and `node_modules/`)
2. **Smart Categorization**: Categorizes files as index, graphs, agents, tools, or other files
3. **Context-Aware Updates**: Updates each file with relevant context from the server:
   - **Graph files**: Updated with specific graph data
   - **Agent files**: Updated with specific agent configurations
   - **Tool files**: Updated with specific tool definitions
   - **Other files**: Updated with full project context
4. **LLM Generation**: Uses AI to maintain code structure while updating with latest data

#### TypeScript Updates (Default)

By default, the pull command updates your existing TypeScript files using LLM generation:

1. **Context Preservation**: Maintains your existing code structure and patterns
2. **Selective Updates**: Only updates relevant parts based on server configuration changes
3. **File-Specific Context**: Each file type receives appropriate context (graphs get graph data, agents get agent data, etc.)

**Examples:**

```bash
# Pull and update all project files from current directory
inkeep pull

# Pull specific project directory
inkeep pull --project ./my-project

# Save project data as JSON file instead of updating files
inkeep pull --json

# Pull with custom API endpoint
inkeep pull --agents-manage-api-url https://api.example.com

# Override tenant ID when using custom API URL
inkeep pull --agents-manage-api-url https://api.example.com --env production
```

#### Model Configuration

For TypeScript generation, you can configure an LLM model in your `inkeep.config.ts`:

```typescript
export default defineConfig({
  tenantId: "your-tenant-id",
  projectId: "your-project-id",
  apiUrl: "https://api.inkeep.com",
  modelConfig: {
    model: "anthropic/claude-3-5-sonnet-20241022",
    providerOptions: {
      anthropic: {},
    },
  },
});
```

**Default Model**: If no model is specified in the configuration, the CLI defaults to `anthropic/claude-4-sonnet-20250514`.

**Supported Providers**:

- **Anthropic**: `anthropic/claude-3-5-sonnet-20241022`, `anthropic/claude-4-sonnet-20250514`, etc
- **OpenAI**: `openai/gpt-4`, `openai/gpt-4-turbo`, etc.

**Minimal Configuration**: You can omit the `model` field to use the default:

```typescript
modelConfig: {
  providerOptions: {
    anthropic: {}, // Uses default Anthropic model
  },
},
```

### `inkeep chat`

Start an interactive chat session with a deployed agent graph.

```bash
inkeep chat [graph-id]
```

**Arguments:**

- `graph-id` - Optional graph ID (interactive selection if not provided)

**Options:**

- `--tenant-id <id>` - Tenant ID
- `--api-url <url>` - API URL
- `--config-file-path <path>` - Path to configuration file

**Example:**

```bash
# Interactive graph selection
inkeep chat

# Chat with specific graph
inkeep chat my-agent-graph

# Use custom API endpoint
inkeep chat --api-url http://localhost:3002
```

### `inkeep list-graphs`

List all available agent graphs for the current tenant.

```bash
inkeep list-graphs
```

**Options:**

- `--tenant-id <id>` - Tenant ID
- `--api-url <url>` - API URL
- `--config-file-path <path>` - Path to configuration file

**Example:**

```bash
inkeep list-graphs
```

### `inkeep config`

Manage Inkeep configuration settings.

#### `inkeep config get`

Get configuration value(s).

```bash
inkeep config get [key]
```

**Arguments:**

- `key` - Optional configuration key to retrieve

**Options:**

- `--config-file-path <path>` - Path to configuration file

**Example:**

```bash
# Get all config values
inkeep config get

# Get specific value
inkeep config get apiUrl
```

#### `inkeep config set`

Set a configuration value.

```bash
inkeep config set <key> <value>
```

**Arguments:**

- `key` - Configuration key
- `value` - Configuration value

**Options:**

- `--config-file-path <path>` - Path to configuration file

**Example:**

```bash
inkeep config set apiUrl http://localhost:3002
inkeep config set tenantId my-tenant-id
```

#### `inkeep config list`

List all configuration values.

```bash
inkeep config list
```

**Options:**

- `--config-file-path <path>` - Path to configuration file

## Configuration File

The CLI uses a configuration file (typically `inkeep.config.ts` or `inkeep.config.json`) to store settings:

```typescript
// inkeep.config.ts
import { defineConfig } from "@inkeep/agents-cli";

export default defineConfig({
  tenantId: "your-tenant-id",
  projectId: "your-project-id",
  apiUrl: "https://api.inkeep.com",
  // Additional configuration options
});
```

### Configuration Priority

Configuration values are resolved in the following order:

1. Command-line arguments
2. `inkeep.config.ts` file
3. Environment variables

## Environment Variables

The CLI respects the following environment variables:

- `INKEEP_API_URL` - Default API URL
- `INKEEP_CONFIG_PATH` - Path to configuration file
- `DB_FILE_NAME` - Database file location (default: `local.db`)

## Database

The CLI uses a local SQLite database (`local.db` by default) to store project and graph metadata. You can override the database location using the `DB_FILE_NAME` environment variable:

```bash
DB_FILE_NAME=my-database.db inkeep push graph.ts
```

## Common Workflows

### Deploy a Multi-Agent Project

1. Create your project structure with agent configurations:

```typescript
// index.ts
import { project } from "@inkeep/agents-sdk";
import { supportGraph } from "./graphs/support.graph";

export const myProject = project({
  id: "customer-support",
  name: "Customer Support System",
  description: "Multi-agent customer support system",
  graphs: () => [supportGraph],
});
```

```typescript
// graphs/support.graph.ts
import { agent, agentGraph } from "@inkeep/agents-sdk";

const supportAgent = agent({
  id: "support-agent",
  name: "Support Agent",
  prompt: "Help customers with their inquiries",
});

export const supportGraph = agentGraph({
  id: "support-graph",
  name: "Support Graph",
  defaultAgent: supportAgent,
  agents: () => [supportAgent],
});
```

2. Push the entire project:

```bash
inkeep push
```

3. Start chatting:

```bash
inkeep chat support-graph
```

### Local Development Setup

1. Initialize configuration:

```bash
inkeep init
```

2. Start your local server:

```bash
pnpm dev
```

3. Push your project configuration:

```bash
inkeep push
```

4. Begin interactive chat:

```bash
inkeep chat
```

### Pull and Modify Existing Project

1. List available graphs in your project:

```bash
inkeep list-graphs
```

2. Pull the latest project configuration and update all files:

```bash
inkeep pull
```

3. Edit the updated TypeScript files as needed:

```bash
# Files updated in place throughout your project
# Review changes in: index.ts, graphs/, agents/, tools/, etc.
```

4. Push your modifications:

```bash
inkeep push
```

5. Test the updated project:

```bash
inkeep chat
```

## Troubleshooting

### Common Issues

**Cannot connect to API:**

- Verify your API URL is correct: `inkeep config get apiUrl`
- Ensure your server is running if using local development
- Check network connectivity

**Project push fails:**

- Ensure your `index.ts` exports a valid project with `__type = "project"`
- Check for syntax errors in your TypeScript files
- Verify all required agent and graph properties are defined
- If using `--env`, ensure the environment file exists in `environments/` directory

**Project pull fails:**

- Verify the project exists and you have access with your current tenant configuration
- Check network connectivity to the API server
- Ensure your project directory contains an `inkeep.config.ts` file

**Environment credentials fail to load:**

- Verify the environment file exists: `environments/{environment}.env.ts`
- Check that the environment file exports valid credential configurations
- Ensure the environment file follows the correct structure with `registerEnvironmentSettings()`
- Verify credential store IDs and types are valid

**TypeScript generation fails:**

- Ensure `modelConfig` is properly configured in your `inkeep.config.ts` (uses `anthropic/claude-4-sonnet-20250514` by default if no model specified)
- Check that your model provider (e.g., Anthropic) credentials are set up
- Try using `--json` flag as a fallback to get the raw graph data
- Increase retry attempts: `inkeep pull graph-id --max-retries 5`

**Validation errors during pull:**

- The generated TypeScript may have syntax errors or missing dependencies
- Check the generated file manually for obvious issues
- Try pulling as JSON first to verify the source data: `inkeep pull graph-id --json`
- Consider using a different model in your `modelConfig` if issues persist

**Project Not Found:**

- If you see an error about a project not existing when pushing a graph:
  1. The CLI will prompt you to create the project
  2. Alternatively, ensure your `projectId` in `inkeep.config.ts` matches an existing project
  3. Check that your database file exists and is accessible

**Database Connection Issues:**

- Ensure the database file path is correct
- Check file permissions for the database
- Try using an absolute path for `DB_FILE_NAME`

### Getting Help

For additional help with any command:

```bash
inkeep [command] --help
```

For issues or feature requests, visit: [GitHub Issues](https://github.com/inkeep/agents/issues)
