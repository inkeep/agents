---
title: Artifact Components
description: Learn how to use artifact components to store and retrieve data from the agent
icon: "TbInputSpark"
---

<Snippet file="multi-agent-framework/artifacts.mdx" />

## Defining Artifact Components

Artifact components are defined using the `artifactComponent` builder function. **We recommend using Zod schemas** for type safety and better developer experience.

<Callout>
**Quick Start**: Citation artifacts are automatically included when you create a new project with `npx @inkeep/create-agents`. You'll find the complete implementation in `artifact-components/citation.ts` in your project. They provide a ready-to-use example for source attribution and are automatically rendered by the Inkeep widget with professional styling and interactions.
</Callout>

### Using Zod Schemas (Recommended)

Here's the citation artifact component that's automatically included in every new project created with `npx @inkeep/create-agents`:

```typescript
import { artifactComponent } from '@inkeep/agents-sdk';
import { z } from 'zod';
import { preview } from '@inkeep/agents-core';

export const citation = artifactComponent({
  id: "citation",
  name: "Citation",
  description: "Structured factual information extracted from search results",
  props: z.object({
    title: preview(z.string().describe("Title of the source document")),
    url: preview(z.string().describe("URL of the source document")),
    record_type: preview(
      z.string().describe("Type of record (documentation, blog, guide, etc.)")
    ),
    content: z
      .array(
        z.object({
          type: z.string().describe("Type of content (text, image, video, etc.)"),
          text: z.string().describe("The actual text content"),
        })
      )
      .describe("Array of structured content blocks extracted from the document"),
  }),
});
```

This citation component demonstrates key artifact patterns:
- **Preview fields**: `title`, `url`, and `record_type` are wrapped with `preview()` for real-time streaming
- **Full content storage**: The `content` array stores complete data without being in preview
- **Type safety**: Zod provides compile-time validation and IntelliSense support

### Alternative: JSON Schema

If you prefer JSON Schema, you can still use it:

```typescript
import { artifactComponent } from '@inkeep/agents-sdk';

export const citation = artifactComponent({
  id: "citation",
  name: "Citation",
  description: "Structured factual information extracted from search results",
  props: {
    type: "object",
    properties: {
      title: {
        type: "string",
        description: "Title of the source document",
        inPreview: true,
      },
      url: { 
        type: "string", 
        description: "URL of the source document",
        inPreview: true,
      },
      record_type: {
        type: "string",
        description: "Type of record (documentation, blog, guide, etc.)",
        inPreview: true,
      },
      content: {
        type: "array",
        items: {
          type: "object",
          properties: {
            type: {
              type: "string",
              description: "Type of content (text, image, video, etc.)",
            },
            text: {
              type: "string",
              description: "The actual text content",
            },
          },
          required: ["type", "text"],
        },
        description: "Array of structured content blocks extracted from the document",
      },
    },
    required: ["title", "url", "record_type", "content"],
  },
});
```

## Schema Options

Artifact components can be configured in three ways:

1. **Zod Schema** (Recommended): Type-safe schema definition with automatic JSON Schema conversion
2. **JSON Schema**: Traditional JSON Schema with manual `inPreview` flags
3. **No Schema**: Save the entire tool result as-is (no field filtering)

### Zod Schema Benefits

- **Type Safety**: Compile-time validation of your schema
- **Better DX**: IntelliSense support and `.describe()` for documentation
- **Automatic Conversion**: Converts to JSON Schema automatically
- **Preview Support**: Use `preview()` helper which automatically sets `inPreview: true` in the resulting JSON Schema

<Note>
When you wrap a Zod schema field with `preview()`, the SDK automatically sets `inPreview: true` in the generated JSON Schema. This is equivalent to manually adding `inPreview: true` when using raw JSON Schema.
</Note>

### Preview Fields

Preview fields control what data is immediately available vs. stored for later retrieval. This affects multiple consumers:

**For Agents:**
- **Preview fields** (`inPreview: true` or wrapped with `preview()`): Shown to agents automatically in tool responses and artifact summaries
- **Full fields**: Complete data available when agents explicitly request the full artifact

**For End Users (Vercel AI SDK Stream & Widget):**
- **Preview fields**: Streamed in real-time to the client as artifacts are created, allowing immediate UI updates

**When no schema is provided**, the entire tool result is saved and available to all consumers (agents, stream, widget).

## Artifact Creation

When an agent uses a tool:

1. The tool processes the request and returns a response
2. **The agent decides** whether to create an artifact from the tool response
3. If created, the artifact is parsed according to the artifact component schema
4. The artifact can be associated with any data components that reference this information

## Artifacts vs Data Components

**Artifacts** and **Data Components** are different:

- **Artifacts**: Citations/sources from tool results stored in the database
- **Data Components**: UI elements agents output in responses (Text, Fact, etc.)

Artifacts provide the source citations that back up information in data components.

## Using in Agents

After defining your artifact component, use it in an agent:

```typescript
import { agent } from '@inkeep/agents-sdk';
import { citation } from './artifact-components/citation';

const searchAgent = agent({
  id: "search-agent",
  canUse: () => [searchTool],
  prompt: "Search for information and cite sources using artifacts.",
  artifactComponents: () => [citation],
});
```

## Citation Rendering in the Widget

Citation artifacts (like the [Zod schema example](#using-zod-schemas-recommended) above, which is automatically included in `npx @inkeep/create-agents` projects) are automatically rendered by Inkeep's widget library, providing professional source attribution with zero additional configuration. When your agent creates a citation artifact—whether from a search tool, knowledge base lookup, or API call—the widget automatically detects it in the stream and renders it with rich, interactive UI elements.

<img
  src="/images/citation-widget-rendering.png"
  alt="Citation rendering in Inkeep widget showing Sources section with expandable citation"
  width="100%"
  style={{ borderRadius: "10px", marginTop: "16px", marginBottom: "16px" }}
/>

As shown above, the widget handles everything automatically: grouping citations in a **"Sources"** section, displaying preview fields (like title and source type), providing expandable interfaces for details, and linking to original source URLs for click-through access. This makes it invaluable when building AI assistants that cite documentation sources, reference blog posts, show product information, or attribute knowledge base articles.

You simply define the citation schema and create artifacts—the widget handles all the visual styling, interaction patterns (expand/collapse, click-through), accessibility features, and mobile responsiveness. Your users get a polished citation experience without any custom UI work.

## Example Flow

Here's a complete example with inline artifact component definition:

```typescript
import { agent } from '@inkeep/agents-sdk';
import { z } from 'zod';
import { preview } from '@inkeep/agents-core';

const searchAgent = subAgent({
  id: "search",
  canUse: () => [searchTool],
  prompt: "Search for information and cite sources using artifacts.",
  artifactComponents: [
    {
      id: "document",
      name: "Document",
      description: "Search result document",
      props: z.object({
        title: preview(z.string().describe("Document title")),
        url: preview(z.string().describe("Document URL")),
        content: z.string().describe("Document content"),
      }),
    },
  ],
});
```

## No Schema Example

```typescript
const rawDataAgent = subAgent({
  id: "raw-data",
  canUse: () => [apiTool],
  prompt: "Fetch data and save complete responses.",
  artifactComponents: [
    {
      id: "api-response",
      name: "API Response",
      description: "Complete API response data",
      // No props - saves entire tool result
    },
  ],
});
```

Example flow:

1. Agent uses search tool and gets results
2. **Agent decides** to create an artifact citing the source document
3. Artifact is stored with preview fields (title, url) shown to other agents
4. Other agents can reference this artifact or get full content when needed
