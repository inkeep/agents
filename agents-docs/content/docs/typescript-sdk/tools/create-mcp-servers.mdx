---
title: Create MCP Servers
description: Learn how to create and deploy MCP servers
icon: "LuServer"
---

MCP servers enable your agents to fetch real-time information and take action on your systems, services, and applications. This guide covers multiple approaches to creating and deploying MCP servers for your agents.

## Out-of-the-box servers

The fastest way to get started is by connecting to existing MCP servers provided directly by SaaS providers that offer them.

### MCPs with OAuth 2.1/PKCE support

These servers often implement OAuth 2.1 with PKCE for secure authentication that allow for `1-click` authentication without the need for API keys.

<Snippet file="mcp/popular-oauth-servers.mdx" />

## Build Your Own

Creating custom MCP servers gives you complete control over functionality and integration with your internal systems.

### From the Quick Start

The Quick Start workspace includes a Next.js app in the `apps/mcp/app/` directory that you can use to expose your MCP servers.
Each MCP server you create will be exposed on a separate route on this app. 

#### Adding from a template

You can add a new MCP server from our [templates repository](https://github.com/inkeep/agents-cookbook) using the [CLI](/typescript-sdk/cli-reference#inkeep-add).
```bash
inkeep add --mcp [server-name]
```

This will automatically add a new MCP server to your Quick Start workspace.

#### Using Vercel's Template

If you want to create a custom MCP server, you can use Vercel's [Next.js MCP template](https://vercel.com/templates/next.js/model-context-protocol-mcp-with-next-js) as a starting point.

<Steps>
<Step>
Create a new directory in your project's `apps/mcp/app/` directory with your desired server name (e.g. `apps/mcp/app/my-email-mcp/mcp`).
```bash
mkdir -p apps/mcp/app/[server-name]/mcp
```
</Step>
<Step>
Copy the template route.ts file from the [Vercel MCP template](https://github.com/vercel-labs/mcp-for-next.js/blob/main/app/mcp/route.ts) into `apps/mcp/app/[server-name]/mcp/route.ts`.
</Step>
<Step>
Modify the template route.ts file with your desired tools and resources.
</Step>
<Step>
Set the `basePath` of the `createMcpHandler` to `/[server-name]`.
</Step>
</Steps>  

#### Running locally

```bash
pnpm dev
```

This will start the server on port 3006.

#### Deploying to Vercel

Follow the instructions in [Deploy to Vercel](/self-hosting/vercel#step-9-create-a-vercel-project-for-your-mcp-server-optional).
If you have already deployed to Vercel, you can simply update the deployment by pushing to the same repository.

<Note>
Enable Fluid compute and set `maxDuration` to 800 in `apps/mcp/app/[server-name]/[transport]/route.ts` if you're on a Pro or Enterprise plan and have long-running operations.
</Note>

### Using Gram

[Speakeasy Gram](https://www.speakeasy.com/product/gram) provides a lightweight open source framework for repurposing and remixing existing APIs into MCP Servers.

### Using Anthropic's MCP SDKs

See [Anthropic's official MCP SDKs](https://github.com/modelcontextprotocol) for low-level building blocks for creating MCP servers in multiple languages like TypeScript, Python and Go.

#### TypeScript example

```typescript
import { McpServer } from '@modelcontextprotocol/sdk/server/mcp.js';
import { StdioServerTransport } from '@modelcontextprotocol/sdk/server/stdio.js';
import { z } from 'zod';

const server = new McpServer({
  name: 'custom-mcp-server',
  version: '1.0.0',
});

server.registerTool(
  'custom_tool',
  {
    title: 'Custom Tool',
    description: 'A custom tool for your specific needs',
    inputSchema: { input: z.string() },
  },
  async ({ input }) => ({
    content: [{ type: 'text', text: `Processed: ${input}` }],
  }),
);

const transport = new StdioServerTransport();
await server.connect(transport);
```

## Use MCP Server Libraries

For rapid development, leverage existing MCP server libraries that provide pre-built integrations.

### Composio

[Composio](https://composio.dev/) offers a platform for building and managing MCP servers with access to 10,000+ pre-built tools and integrations.

#### Quick integration

Follow Composio's MCP Gateway setup to obtain your MCP server URL and credentials. Then register it as a tool in your project:

```typescript
import { mcpTool } from '@inkeep/agents-sdk';

const composioTool = mcpTool({
  id: 'composio-tools',
  name: 'Composio Integration',
  description: 'Access popular SaaS tools via Composio',
  serverUrl: 'YOUR_COMPOSIO_MCP_URL', // From Composio dashboard
});
```

## Next Steps
Once you create your MCP server, register it and manage its credentials:

<Cards>
  <Card title="Visual Builder - MCP Servers" icon="LuServer" href="/visual-builder/tools/mcp-servers">
    Configure and manage MCP servers in the Visual Builder.
  </Card>
  <Card title="Visual Builder - Credentials" icon="LuKey" href="/visual-builder/tools/credentials">
    Add and manage credentials, including OAuth 2.1/PKCE.
  </Card>
  <Card title="TypeScript SDK - MCP Servers" icon="LuHammer" href="/typescript-sdk/tools/mcp-servers">
    Register and use MCP servers programmatically.
  </Card>
  <Card title="TypeScript SDK - Credentials" icon="LuKey" href="/typescript-sdk/tools/credentials">
    Reference credentials in code for secure access.
  </Card>
</Cards>