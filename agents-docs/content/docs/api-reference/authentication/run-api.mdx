---
title: Run API Authentication
description: Authentication modes for Run API
icon: "LuShield"
---

The Run API (`agents-run-api`) uses Bearer token authentication with API keys.

## API Key Authentication

All Run API endpoints require a valid API key in the `Authorization` header.

### Creating API Keys

API keys are created through the Manage UI:

1. Navigate to your project
2. Go to API Keys section
3. Click "Create API Key"
4. Set an optional expiration date
5. Copy the key (shown only once)

### Using API Keys

Include the API key as a Bearer token:

```bash
curl -X POST https://run-api.example.com/api/chat \
  -H "Authorization: Bearer sk_abc123def456..." \
  -H "Content-Type: application/json" \
  -d '{
    "messages": [
      {"role": "user", "content": "Hello"}
    ]
  }'
```

### API Key Format

API keys follow the format: `sk_{publicId}.{secret}`

- **Prefix**: `sk_` indicates a secret key
- **Public ID**: 12-character identifier for O(1) lookups
- **Secret**: 32 bytes of cryptographically secure random data

### API Key Scoping

API keys are scoped to:
- **Tenant**: Organization/workspace
- **Project**: Specific project within the tenant
- **Agent**: Individual agent within the project

The scope is encoded in the key, so no additional headers are needed.

## Development Mode

When `ENVIRONMENT=development`:

- No API key required
- Must include scope headers:
  - `x-inkeep-tenant-id`
  - `x-inkeep-project-id`
  - `x-inkeep-agent-id`

```bash
curl -H "x-inkeep-tenant-id: tenant-123" \
     -H "x-inkeep-project-id: project-456" \
     -H "x-inkeep-agent-id: agent-789" \
     http://localhost:3003/api/chat
```

## Temporary Keys (Playground)

The playground in the Manage UI uses temporary API keys:

- **Duration**: 1 hour
- **Purpose**: Allow authenticated users to test agents
- **Generation**: Automatic via `/api/playground/token` endpoint
- **Scope**: Same as regular API keys

### How it works

1. User opens playground (authenticated via session)
2. UI requests temporary key from Manage API
3. Manage API validates session, generates 1-hour key
4. UI uses key to call Run API directly
5. Key expires automatically

This ensures:
- Sessions don't need to persist for long-running executions
- API keys are never exposed in client-side code
- Direct connection to Run API (low latency)

## Bypass Secret (Testing Only)

When `INKEEP_AGENTS_RUN_API_BYPASS_SECRET` is set:

```bash
curl -H "Authorization: Bearer YOUR_BYPASS_SECRET" \
     -H "x-inkeep-tenant-id: tenant-123" \
     -H "x-inkeep-project-id: project-456" \
     -H "x-inkeep-agent-id: agent-789" \
     http://localhost:3003/api/chat
```

**Warning**: Bypass secret should only be used for testing and internal services. Never expose it in environment variables prefixed with `PUBLIC_`.

## Security Best Practices

1. **Never expose API keys in client-side code**
2. **Use temporary keys for playground** (automatic)
3. **Set expiration dates** on production API keys
4. **Rotate keys regularly** and revoke compromised keys
5. **Use bypass secret only in development** for testing purposes

## Long-Running Executions

API keys are ideal for long-running agent executions because:

- They don't expire based on user session
- They can be scoped to conversation lifetime
- They're stateless and don't require refresh
- They work across multi-day approval workflows
