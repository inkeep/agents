---
title: Custom Trigger
description: Create custom UI elements to trigger Inkeep modals in Next.js with App Router and dynamic import.
icon: LuMousePointerClick
---

<Note>
For Next.js apps that use App Router, use the `"use client"` directive at the top of the file to load the widget client-side.
</Note>

Custom triggers give you complete control over how users open Inkeep modals in your Next.js application. Load `InkeepModalChat` with `next/dynamic` and `ssr: false`.

## Installation

<CodeGroup>
```bash title="npm"
npm install @inkeep/agents-ui
```

```bash title="yarn"
yarn add @inkeep/agents-ui
```

```bash title="pnpm"
pnpm add @inkeep/agents-ui
```

</CodeGroup>

## Quick Start

<Tabs>
  <Tab title="Production">

    Use an API key for secure authentication in production:

    ```tsx
    'use client';

    import { useState } from 'react';
    import dynamic from 'next/dynamic';
    import type { InkeepModalChatProps } from '@inkeep/agents-ui';

    const InkeepModalChat = dynamic(
      () => import('@inkeep/agents-ui').then((mod) => mod.InkeepModalChat),
      { ssr: false },
    );

    export default function CustomTrigger() {
      const [isModalOpen, setIsModalOpen] = useState(false);

      const modalProps: InkeepModalChatProps = {
        aiChatSettings: {
          agentUrl: 'https://your-api.example.com/run/api/chat',
          apiKey: process.env.NEXT_PUBLIC_INKEEP_API_KEY,
        },
        openSettings: {
          isOpen: isModalOpen,
          onOpenChange: setIsModalOpen,
        },
      };

      return (
        <>
          <button onClick={() => setIsModalOpen(true)}>
            Open Inkeep Assistant
          </button>
          <InkeepModalChat {...modalProps} />
        </>
      );
    }
    ```

    **To get an API key:**
    1. Open the Visual Builder Dashboard
    2. Navigate to your Project â†’ **API Keys**
    3. Click **Create New Key** and select your agent
    4. Copy the key (shown once) and store it in your environment variables

  </Tab>

  <Tab title="Development">

    For local development, use headers with your agent IDs:

    ```tsx
    'use client';

    import { useState } from 'react';
    import dynamic from 'next/dynamic';
    import type { InkeepModalChatProps } from '@inkeep/agents-ui';

    const InkeepModalChat = dynamic(
      () => import('@inkeep/agents-ui').then((mod) => mod.InkeepModalChat),
      { ssr: false },
    );

    export default function CustomTrigger() {
      const [isModalOpen, setIsModalOpen] = useState(false);

      const modalProps: InkeepModalChatProps = {
        aiChatSettings: {
          agentUrl: 'http://localhost:3003/api/chat',
          headers: {
            'x-inkeep-tenant-id': 'your-tenant-id',
            'x-inkeep-project-id': 'your-project-id',
            'x-inkeep-agent-id': 'your-agent-id',
          },
        },
        openSettings: {
          isOpen: isModalOpen,
          onOpenChange: setIsModalOpen,
        },
      };

      return (
        <>
          <button onClick={() => setIsModalOpen(true)}>
            Open Inkeep Assistant
          </button>
          <InkeepModalChat {...modalProps} />
        </>
      );
    }
    ```

    **Note:** Run your API server with `ENVIRONMENT=development` to bypass authentication.

  </Tab>
</Tabs>

## Props

<AutoTypeTable name="default" type="export { InkeepModalChatProps as default } from '@inkeep/agents-ui'" typeLinks={{ InkeepBaseSettings: 'inkeepbasesettings', InkeepAIChatSettings: 'inkeepaichatsettings', OpenSettingsModal: 'open-settings' }} />

<Snippet file="chat-components/base-settings.mdx" />

<Snippet file="chat-components/ai-chat-settings.mdx" />

### Open Settings

<AutoTypeTable name="default" type="export { OpenSettingsModal as default } from '@inkeep/agents-ui/types'" typeLinks={['InkeepBaseSettings', 'InkeepAIChatSettings']} />
