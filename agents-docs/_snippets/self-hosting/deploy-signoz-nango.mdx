Clone this repo, which includes Docker files with SigNoz and Nango:
```bash
git clone https://github.com/inkeep/agents-optional-local-dev inkeep-external-services
cd inkeep-external-services
```

Run this command to autogenerate a `.env` file:
```bash
cp .env.docker.example .env && \
  nango_encryption_key=$(openssl rand -base64 32) && \
  nango_dashboard_password=$(openssl rand -base64 8) && \
  tmp_file=$(mktemp) && \
  sed \
    -e "s|<REPLACE_WITH_NANGO_ENCRYPTION_KEY>|$nango_encryption_key|" \
    -e "s|<REPLACE_WITH_NANGO_DASHBOARD_PASSWORD>|$nango_dashboard_password|" \
    .env > "$tmp_file" && \
  mv "$tmp_file" .env && \
  echo "Docker environment file created with auto-generated NANGO_ENCRYPTION_KEY and NANGO_DASHBOARD_PASSWORD"
```

Nango requires a `NANGO_ENCRYPTION_KEY`. Once you create this, it cannot be edited.

Here's an overview of the important environment variables when deploying to production. Make sure to review all of these in your `.env` file.
```bash
NANGO_ENCRYPTION_KEY=<nango_encryption_key>

# Replace these with your <vm_ip> in production!
NANGO_SERVER_URL=http://<vm_ip>:3050
NANGO_PUBLIC_CONNECT_URL=http://<vm_ip>:3051

# Modify these in production environments!
NANGO_DASHBOARD_USERNAME=admin@example.com
NANGO_DASHBOARD_PASSWORD=adminADMIN!@12
```

Build and deploy SigNoz, Nango, OTEL Collector, and Jaeger:
```bash
docker compose up -d
```
This may take up to 5 minutes to start.

### Retrieve your SigNoz and Nango API Keys

To get your SigNoz API key `SIGNOZ_API_KEY`:
- Open SigNoz in a browser at `http://<vm_ip>:3080`
- On first login, you will be prompted to create an admin account.
- Navigate to Settings → Account Settings → API Keys → New Key
- Choose a role, Viewer is sufficient for observability
- Set the expiration field to "No Expiry" to prevent the key from expiring

<Note>
By default, the retention period for conversation data and traces is set to **15 days**. To set a longer retention period, navigate to the **General** tab on the **Settings** page in SigNoz.
</Note>

To get your Nango secret key `NANGO_SECRET_KEY`:
- Open Nango in a browser at `http://<vm_ip>:3050`
- Nango auto-creates two environments, Prod and Dev. Select the one you will use.
- Navigate to Environment Settings to find the secret key
