name: Speakeasy SDK Generation

on:
  workflow_dispatch: {} # Manual trigger
  schedule:
    - cron: '0 0 * * *' # Daily at midnight UTC

jobs:
  generate:
    name: Generate agents-mcp SDK
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Generate SDK
        uses: speakeasy-api/sdk-generation-action@v15
        with:
          speakeasy_api_key: ${{ secrets.SPEAKEASY_API_KEY }}
          github_access_token: ${{ secrets.GITHUB_TOKEN }}
          mode: pr
          working_directory: packages/agents-mcp
